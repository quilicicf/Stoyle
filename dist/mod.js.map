{"version":3,"sources":["/home/cyp/work/forge/github/quilicicf/Stoyle/mod.ts"],"sourcesContent":["type Maybe<T> = T | undefined;\n\n/**************\n * ANSI CODES *\n *************/\n\nexport const RESET_CODE: number = 0;\n\n// noinspection JSUnusedGlobalSymbols\nexport enum ForegroundSimpleCode {\n  FG_Black = 30,\n  FG_Red = 31,\n  FG_Green = 32,\n  FG_Yellow = 33,\n  FG_Blue = 34,\n  FG_Magenta = 35,\n  FG_Cyan = 36,\n  FG_White = 37,\n  FG_Bright_Black = 90,\n  FG_Bright_Red = 91,\n  FG_Bright_Green = 92,\n  FG_Bright_Yellow = 93,\n  FG_Bright_Blue = 94,\n  FG_Bright_Magenta = 95,\n  FG_Bright_Cyan = 96,\n  FG_Bright_White = 97,\n}\n\n// noinspection JSUnusedGlobalSymbols\nexport enum BackgroundSimpleCode {\n  BG_Black = 40,\n  BG_Red = 41,\n  BG_Green = 42,\n  BG_Yellow = 43,\n  BG_Blue = 44,\n  BG_Magenta = 45,\n  BG_Cyan = 46,\n  BG_White = 47,\n  BG_Bright_Black = 100,\n  BG_Bright_Red = 101,\n  BG_Bright_Green = 102,\n  BG_Bright_Yellow = 103,\n  BG_Bright_Blue = 104,\n  BG_Bright_Magenta = 105,\n  BG_Bright_Cyan = 106,\n  BG_Bright_White = 107,\n}\n\n// noinspection JSUnusedGlobalSymbols\nexport enum DecorationCode {\n  Bold = 1,\n  Dim = 2,\n  Italic = 3,\n  Underline = 4,\n  Blink_Slow = 5,\n  Blink_Fast = 6,\n  Reverse_Video = 7,\n  Conceal = 8,\n  Crossed_Out = 9,\n  Primary = 10,\n  Alternative_Font_1 = 11,\n  Alternative_Font_2 = 12,\n  Alternative_Font_3 = 13,\n  Alternative_Font_4 = 14,\n  Alternative_Font_5 = 15,\n  Alternative_Font_6 = 16,\n  Alternative_Font_7 = 17,\n  Alternative_Font_8 = 18,\n  Alternative_Font_9 = 19,\n  Fraktur = 20,\n  Double_Underline = 21,\n  Normal = 22,\n  Italic_And_Fraktur_Off = 23,\n  Underline_Off = 24,\n  Blink_Off = 25,\n  Proportional_Spacing = 26,\n  Reverse_And_Invert_Off = 27,\n  Reveal_And_Conceal_Off = 28,\n  Crossed_Off = 29\n}\n\nfunction checkRgbRange (code: number) {\n  if (code < 0 || code > 255) {\n    throw Error(`RGB codes should be between 0 & 255, got: ${code}`);\n  }\n  return code;\n}\n\nexport class RgbCode {\n  red: number;\n  green: number;\n  blue: number;\n\n  constructor (red: number, green: number, blue: number) {\n    this.red = checkRgbRange(red);\n    this.green = checkRgbRange(green);\n    this.blue = checkRgbRange(blue);\n  }\n}\n\nexport class ForegroundRgbCode extends RgbCode {\n  toString () {\n    return `38;2;${this.red};${this.green};${this.blue}`;\n  }\n}\n\nexport class BackgroundRgbCode extends RgbCode {\n  toString () {\n    return `48;2;${this.red};${this.green};${this.blue}`;\n  }\n}\n\nexport type ForegroundCode = ForegroundSimpleCode | ForegroundRgbCode;\nexport type BackgroundCode = BackgroundSimpleCode | BackgroundRgbCode;\n\nexport interface Style {\n  color?: ForegroundCode,\n  backgroundColor?: BackgroundCode,\n  decoration?: DecorationCode,\n}\n\nexport function styleToAnsiCode ({ color, backgroundColor, decoration }: Style, shouldResetFirst: boolean = false): string {\n  const codes = [\n    ...(shouldResetFirst ? [ RESET_CODE ] : []),\n    color,\n    backgroundColor,\n    decoration,\n  ].filter((code) => (typeof code === 'number' || typeof code === 'object'));\n  return codes.length === 0 ? '' : `\\x1b[${codes.join(';')}m`;\n}\n\n/*******************\n * APPLYING STYLES *\n ******************/\n\nexport enum StyleMode { STYLE, NO_STYLE}\n\ninterface StylesToApply {\n  global?: Style,\n  edges?: Maybe<Style>[],\n  nodes?: Maybe<Style>[],\n}\n\ntype GlobalStyler = (style: Style, styleMode?: StyleMode) => string;\n\ntype Styler = (stylesToApply: StylesToApply, styleMode?: StyleMode) => string;\n\ninterface Fragment {\n  string: string,\n  shouldResetFirst: boolean,\n  style: Maybe<Style>,\n}\n\ninterface Accumulator {\n  currentStyle: Style,\n  fragments: Fragment[],\n}\n\nfunction areStylesEqual (style1: Style, style2: Style): boolean {\n  return style1.color === style2.color\n    && style1.backgroundColor === style2.backgroundColor\n    && style1.decoration === style2.decoration;\n}\n\nfunction computeNextFragment (string: string, lastStyle: Style, styleToApply: Maybe<Style>): Fragment {\n  if (!styleToApply || areStylesEqual(styleToApply, lastStyle)) { return { string, shouldResetFirst: false, style: undefined }; }\n\n  const shouldRemoveOldColor = !!lastStyle.color && !styleToApply.color;\n  const shouldRemoveOldBackgroundColor = !!lastStyle.backgroundColor && !styleToApply.backgroundColor;\n  const shouldRemoveOldDecoration = !!lastStyle.decoration && styleToApply.decoration !== lastStyle.decoration;\n  const shouldResetFirst = shouldRemoveOldColor || shouldRemoveOldBackgroundColor || shouldRemoveOldDecoration;\n\n  return { // Colors are reset if unset\n    string,\n    shouldResetFirst,\n    style: {\n      color: shouldResetFirst || styleToApply.color !== lastStyle.color ? styleToApply.color : undefined,\n      backgroundColor: shouldResetFirst || styleToApply.backgroundColor !== lastStyle.backgroundColor ? styleToApply.backgroundColor : undefined,\n      decoration: shouldResetFirst || styleToApply.decoration !== lastStyle.decoration ? styleToApply.decoration : undefined,\n    },\n  };\n}\n\nfunction computeNextCode<T> (lastCode: Maybe<T>, newCode: Maybe<T>, hasReset: boolean): Maybe<T> {\n  if (newCode) { return newCode; }\n  return hasReset || !lastCode ? undefined : lastCode;\n}\n\nfunction printFragmentStyle (fragment: Fragment) {\n  return fragment.style ? styleToAnsiCode(fragment.style, fragment.shouldResetFirst) : '';\n}\n\nfunction getString (index: number, edges: string[], nodes: any[]): string {\n  const isEven = index % 2 === 0;\n  const halfIndex = ~~(index / 2);\n  return String(\n    isEven ? edges[ halfIndex ] : nodes[ halfIndex ],\n  );\n}\n\nfunction getSpecificStyle (index: number, styles: StylesToApply): Maybe<Style> {\n  const isEven = index % 2 === 0;\n  const halfIndex = ~~(index / 2);\n  return isEven ? styles?.edges?.[ halfIndex ] : styles?.nodes?.[ halfIndex ];\n}\n\nexport function stoyleString (input: string, style: Style, styleMode: StyleMode = StyleMode.STYLE): string {\n  return styleMode === StyleMode.NO_STYLE\n    ? input\n    : styleToAnsiCode(style) + input + styleToAnsiCode({}, true);\n}\n\nexport function stoyleGlobal (edgesAsTemplateStringArray: TemplateStringsArray, ...nodes: any[]): GlobalStyler {\n  const edges = [ ...edgesAsTemplateStringArray ];\n  return (style: Style, styleMode: StyleMode = StyleMode.STYLE) => {\n    const wholeString = new Array(edges.length + nodes.length)\n      .fill(null)\n      .map((whatever, index) => getString(index, edges, nodes))\n      .join('');\n    return stoyleString(wholeString, style, styleMode);\n  };\n}\n\nexport function stoyle (edgesAsTemplateStringArray: TemplateStringsArray, ...nodes: any[]): Styler {\n  const edges = [ ...edgesAsTemplateStringArray ];\n  return (styles: StylesToApply, styleMode: StyleMode = StyleMode.STYLE) => {\n    if (styles.edges && edges.length !== styles.edges?.length) {\n      throw Error(`I found ${edges.length} edge(s), but ${styles.edges?.length} edge style(s)!`);\n    }\n\n    if (styles.nodes && nodes.length !== styles.nodes?.length) {\n      throw Error(`I found ${nodes.length} node(s), but ${styles.nodes?.length} node style(s)!`);\n    }\n\n    const globalStyle = styles?.global ?? {}; // Defaults to no style\n    const accumulator: Accumulator = new Array(edges.length + nodes.length)\n      .fill(null)\n      .reduce(\n        (seed: Accumulator, whatever, index) => {\n          const string = getString(index, edges, nodes);\n\n          if (!string) { return seed; } // Nothing to write for empty strings\n\n          const specificStyle = getSpecificStyle(index, styles);\n          const styleToApply = specificStyle ?? globalStyle; // Specific styles supersede global style\n          const fragment: Fragment = styleMode === StyleMode.NO_STYLE\n            ? { string, shouldResetFirst: false, style: {} }\n            : computeNextFragment(string, seed.currentStyle, styleToApply);\n\n          seed.fragments.push(fragment);\n          seed.currentStyle = {\n            color: computeNextCode(seed.currentStyle.color, fragment?.style?.color, fragment.shouldResetFirst),\n            backgroundColor: computeNextCode(seed.currentStyle.backgroundColor, fragment?.style?.backgroundColor, fragment.shouldResetFirst),\n            decoration: computeNextCode(seed.currentStyle.decoration, fragment?.style?.decoration, fragment.shouldResetFirst),\n          };\n          return seed;\n        },\n        {\n          currentStyle: {},\n          fragments: [],\n        } as Accumulator,\n      );\n\n    const { fragments, currentStyle: lastStyle } = accumulator;\n\n    const shouldCleanup = !!lastStyle.color\n      || !!lastStyle.backgroundColor\n      || !!lastStyle.decoration;\n\n    const allFragments = shouldCleanup\n      ? fragments.concat({ string: '', shouldResetFirst: true, style: {} })\n      : fragments;\n\n    return allFragments\n      .map((fragment: Fragment) => printFragmentStyle(fragment) + fragment.string)\n      .join('');\n  };\n}\n"],"names":[],"mappings":"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"}