{"version":3,"sources":["../mod.ts"],"sourcesContent":["type Maybe<T> = T | undefined;\n\n/**************\n * ANSI CODES *\n *************/\n\nexport const RESET_CODE: number = 0;\n\n// noinspection JSUnusedGlobalSymbols\nexport enum ForegroundSimpleCode {\n  FG_Black = 30,\n  FG_Red = 31,\n  FG_Green = 32,\n  FG_Yellow = 33,\n  FG_Blue = 34,\n  FG_Magenta = 35,\n  FG_Cyan = 36,\n  FG_White = 37,\n  FG_Bright_Black = 90,\n  FG_Bright_Red = 91,\n  FG_Bright_Green = 92,\n  FG_Bright_Yellow = 93,\n  FG_Bright_Blue = 94,\n  FG_Bright_Magenta = 95,\n  FG_Bright_Cyan = 96,\n  FG_Bright_White = 97,\n}\n\n// noinspection JSUnusedGlobalSymbols\nexport enum BackgroundSimpleCode {\n  BG_Black = 40,\n  BG_Red = 41,\n  BG_Green = 42,\n  BG_Yellow = 43,\n  BG_Blue = 44,\n  BG_Magenta = 45,\n  BG_Cyan = 46,\n  BG_White = 47,\n  BG_Bright_Black = 100,\n  BG_Bright_Red = 101,\n  BG_Bright_Green = 102,\n  BG_Bright_Yellow = 103,\n  BG_Bright_Blue = 104,\n  BG_Bright_Magenta = 105,\n  BG_Bright_Cyan = 106,\n  BG_Bright_White = 107,\n}\n\n// noinspection JSUnusedGlobalSymbols\nexport enum DecorationCode {\n  Bold = 1,\n  Dim = 2,\n  Italic = 3,\n  Underline = 4,\n  Blink_Slow = 5,\n  Blink_Fast = 6,\n  Reverse_Video = 7,\n  Conceal = 8,\n  Crossed_Out = 9,\n  Primary = 10,\n  Alternative_Font_1 = 11,\n  Alternative_Font_2 = 12,\n  Alternative_Font_3 = 13,\n  Alternative_Font_4 = 14,\n  Alternative_Font_5 = 15,\n  Alternative_Font_6 = 16,\n  Alternative_Font_7 = 17,\n  Alternative_Font_8 = 18,\n  Alternative_Font_9 = 19,\n  Fraktur = 20,\n  Double_Underline = 21,\n  Normal = 22,\n  Italic_And_Fraktur_Off = 23,\n  Underline_Off = 24,\n  Blink_Off = 25,\n  Proportional_Spacing = 26,\n  Reverse_And_Invert_Off = 27,\n  Reveal_And_Conceal_Off = 28,\n  Crossed_Off = 29\n}\n\nfunction checkRgbRange (code: number) {\n  if (code < 0 || code > 255) {\n    throw Error(`RGB codes should be between 0 & 255, got: ${code}`);\n  }\n  return code;\n}\n\nexport class RgbCode {\n  red: number;\n  green: number;\n  blue: number;\n\n  constructor (red: number, green: number, blue: number) {\n    this.red = checkRgbRange(red);\n    this.green = checkRgbRange(green);\n    this.blue = checkRgbRange(blue);\n  }\n}\n\nexport class ForegroundRgbCode extends RgbCode {\n  toString () {\n    return `38;2;${this.red};${this.green};${this.blue}`;\n  }\n}\n\nexport class BackgroundRgbCode extends RgbCode {\n  toString () {\n    return `48;2;${this.red};${this.green};${this.blue}`;\n  }\n}\n\nexport type ForegroundCode = ForegroundSimpleCode | ForegroundRgbCode;\nexport type BackgroundCode = BackgroundSimpleCode | BackgroundRgbCode;\n\nexport interface Style {\n  color?: ForegroundCode,\n  backgroundColor?: BackgroundCode,\n  decoration?: DecorationCode,\n}\n\nexport function styleToAnsiCode ({ color, backgroundColor, decoration }: Style, shouldResetFirst: boolean = false): string {\n  const codes = [\n    ...(shouldResetFirst ? [ RESET_CODE ] : []),\n    color,\n    backgroundColor,\n    decoration,\n  ].filter((code) => (typeof code === 'number' || typeof code === 'object'));\n  return codes.length === 0 ? '' : `\\x1b[${codes.join(';')}m`;\n}\n\n/*******************\n * APPLYING STYLES *\n ******************/\n\nexport enum StyleMode { STYLE, NO_STYLE}\n\ninterface StylesToApply {\n  global?: Style,\n  edges?: Maybe<Style>[],\n  nodes?: Maybe<Style>[],\n}\n\ntype GlobalStyler = (style: Style, styleMode?: StyleMode) => string;\n\ntype Styler = (stylesToApply: StylesToApply, styleMode?: StyleMode) => string;\n\ninterface Fragment {\n  string: string,\n  shouldResetFirst: boolean,\n  style: Maybe<Style>,\n}\n\ninterface Accumulator {\n  currentStyle: Style,\n  fragments: Fragment[],\n}\n\nfunction areStylesEqual (style1: Style, style2: Style): boolean {\n  return style1.color === style2.color\n    && style1.backgroundColor === style2.backgroundColor\n    && style1.decoration === style2.decoration;\n}\n\nfunction computeNextFragment (string: string, lastStyle: Style, styleToApply: Maybe<Style>): Fragment {\n  if (!styleToApply || areStylesEqual(styleToApply, lastStyle)) { return { string, shouldResetFirst: false, style: undefined }; }\n\n  const shouldRemoveOldColor = !!lastStyle.color && !styleToApply.color;\n  const shouldRemoveOldBackgroundColor = !!lastStyle.backgroundColor && !styleToApply.backgroundColor;\n  const shouldRemoveOldDecoration = !!lastStyle.decoration && styleToApply.decoration !== lastStyle.decoration;\n  const shouldResetFirst = shouldRemoveOldColor || shouldRemoveOldBackgroundColor || shouldRemoveOldDecoration;\n\n  return { // Colors are reset if unset\n    string,\n    shouldResetFirst,\n    style: {\n      color: shouldResetFirst || styleToApply.color !== lastStyle.color ? styleToApply.color : undefined,\n      backgroundColor: shouldResetFirst || styleToApply.backgroundColor !== lastStyle.backgroundColor ? styleToApply.backgroundColor : undefined,\n      decoration: shouldResetFirst || styleToApply.decoration !== lastStyle.decoration ? styleToApply.decoration : undefined,\n    },\n  };\n}\n\nfunction computeNextCode<T> (lastCode: Maybe<T>, newCode: Maybe<T>, hasReset: boolean): Maybe<T> {\n  if (newCode) { return newCode; }\n  return hasReset || !lastCode ? undefined : lastCode;\n}\n\nfunction printFragmentStyle (fragment: Fragment) {\n  return fragment.style ? styleToAnsiCode(fragment.style, fragment.shouldResetFirst) : '';\n}\n\nfunction getString (index: number, edges: string[], nodes: any[]): string {\n  const isEven = index % 2 === 0;\n  const halfIndex = ~~(index / 2);\n  return String(\n    isEven ? edges[ halfIndex ] : nodes[ halfIndex ],\n  );\n}\n\nfunction getSpecificStyle (index: number, styles: StylesToApply): Maybe<Style> {\n  const isEven = index % 2 === 0;\n  const halfIndex = ~~(index / 2);\n  return isEven ? styles?.edges?.[ halfIndex ] : styles?.nodes?.[ halfIndex ];\n}\n\nexport function stoyleString (input: string, style: Style, styleMode: StyleMode = StyleMode.STYLE): string {\n  return styleMode === StyleMode.NO_STYLE\n    ? input\n    : styleToAnsiCode(style) + input + styleToAnsiCode({}, true);\n}\n\nexport function stoyleGlobal (edgesAsTemplateStringArray: TemplateStringsArray, ...nodes: any[]): GlobalStyler {\n  const edges = [ ...edgesAsTemplateStringArray ];\n  return (style: Style, styleMode: StyleMode = StyleMode.STYLE) => {\n    const wholeString = new Array(edges.length + nodes.length)\n      .fill(null)\n      .map((whatever, index) => getString(index, edges, nodes))\n      .join('');\n    return stoyleString(wholeString, style, styleMode);\n  };\n}\n\nexport function stoyle (edgesAsTemplateStringArray: TemplateStringsArray, ...nodes: any[]): Styler {\n  const edges = [ ...edgesAsTemplateStringArray ];\n  return (styles: StylesToApply, styleMode: StyleMode = StyleMode.STYLE) => {\n    if (styles.edges && edges.length !== styles.edges?.length) {\n      throw Error(`I found ${edges.length} edge(s), but ${styles.edges?.length} edge style(s)!`);\n    }\n\n    if (styles.nodes && nodes.length !== styles.nodes?.length) {\n      throw Error(`I found ${nodes.length} node(s), but ${styles.nodes?.length} node style(s)!`);\n    }\n\n    const globalStyle = styles?.global ?? {}; // Defaults to no style\n    const accumulator: Accumulator = new Array(edges.length + nodes.length)\n      .fill(null)\n      .reduce(\n        (seed: Accumulator, whatever, index) => {\n          const string = getString(index, edges, nodes);\n\n          if (!string) { return seed; } // Nothing to write for empty strings\n\n          const specificStyle = getSpecificStyle(index, styles);\n          const styleToApply = specificStyle ?? globalStyle; // Specific styles supersede global style\n          const fragment: Fragment = styleMode === StyleMode.NO_STYLE\n            ? { string, shouldResetFirst: false, style: {} }\n            : computeNextFragment(string, seed.currentStyle, styleToApply);\n\n          seed.fragments.push(fragment);\n          seed.currentStyle = {\n            color: computeNextCode(seed.currentStyle.color, fragment?.style?.color, fragment.shouldResetFirst),\n            backgroundColor: computeNextCode(seed.currentStyle.backgroundColor, fragment?.style?.backgroundColor, fragment.shouldResetFirst),\n            decoration: computeNextCode(seed.currentStyle.decoration, fragment?.style?.decoration, fragment.shouldResetFirst),\n          };\n          return seed;\n        },\n        {\n          currentStyle: {},\n          fragments: [],\n        } as Accumulator,\n      );\n\n    const { fragments, currentStyle: lastStyle } = accumulator;\n\n    const shouldCleanup = !!lastStyle.color\n      || !!lastStyle.backgroundColor\n      || !!lastStyle.decoration;\n\n    const allFragments = shouldCleanup\n      ? fragments.concat({ string: '', shouldResetFirst: true, style: {} })\n      : fragments;\n\n    return allFragments\n      .map((fragment: Fragment) => printFragmentStyle(fragment) + fragment.string)\n      .join('');\n  };\n}\n"],"names":["RESET_CODE","ForegroundSimpleCode","FG_Black","FG_Red","FG_Green","FG_Yellow","FG_Blue","FG_Magenta","FG_Cyan","FG_White","FG_Bright_Black","FG_Bright_Red","FG_Bright_Green","FG_Bright_Yellow","FG_Bright_Blue","FG_Bright_Magenta","FG_Bright_Cyan","FG_Bright_White","BackgroundSimpleCode","BG_Black","BG_Red","BG_Green","BG_Yellow","BG_Blue","BG_Magenta","BG_Cyan","BG_White","BG_Bright_Black","BG_Bright_Red","BG_Bright_Green","BG_Bright_Yellow","BG_Bright_Blue","BG_Bright_Magenta","BG_Bright_Cyan","BG_Bright_White","DecorationCode","Bold","Dim","Italic","Underline","Blink_Slow","Blink_Fast","Reverse_Video","Conceal","Crossed_Out","Primary","Alternative_Font_1","Alternative_Font_2","Alternative_Font_3","Alternative_Font_4","Alternative_Font_5","Alternative_Font_6","Alternative_Font_7","Alternative_Font_8","Alternative_Font_9","Fraktur","Double_Underline","Normal","Italic_And_Fraktur_Off","Underline_Off","Blink_Off","Proportional_Spacing","Reverse_And_Invert_Off","Reveal_And_Conceal_Off","Crossed_Off","checkRgbRange","code","Error","RgbCode","red","green","blue","ForegroundRgbCode","toString","BackgroundRgbCode","styleToAnsiCode","color","backgroundColor","decoration","shouldResetFirst","codes","filter","length","join","StyleMode","STYLE","NO_STYLE","areStylesEqual","style1","style2","computeNextFragment","string","lastStyle","styleToApply","style","undefined","shouldRemoveOldColor","shouldRemoveOldBackgroundColor","shouldRemoveOldDecoration","computeNextCode","lastCode","newCode","hasReset","printFragmentStyle","fragment","getString","index","edges","nodes","isEven","halfIndex","String","getSpecificStyle","styles","stoyleString","input","styleMode","stoyleGlobal","edgesAsTemplateStringArray","wholeString","Array","fill","map","whatever","stoyle","globalStyle","global","accumulator","reduce","seed","specificStyle","currentStyle","fragments","push","shouldCleanup","allFragments","concat"],"mappings":"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"}